(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{242:function(e,t,a){e.exports=a(447)},247:function(e,t,a){},267:function(e,t,a){},386:function(e,t,a){},387:function(e,t,a){},389:function(e,t,a){},410:function(e,t,a){},438:function(e,t,a){},445:function(e,t,a){},446:function(e,t,a){},447:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(33),o=a.n(s),l=(a(247),a(13)),i=a(14),c=a(16),u=a(15),h=a(17),m=a(450),d=a(161),p=a(451),g=a(3),v=a.n(g),E=a(12),f=a(49),y=a.n(f),b=a(34),w=a.n(b),C=a(27),k=a.n(C),O=a(9),S=a.n(O),j=a(24),I=a.n(j),N=a(29),T=a.n(N),x=a(23),D=a.n(x),P=a(76),A=a.n(P),L=a(77),B=a.n(L),F=a(159),U=a.n(F),M=document.cookie.match(new RegExp("XSRF-TOKEN=([^;]+)"))[1],R=U.a.create({withCredentials:!0,baseURL:"https://dickens-blog.herokuapp.com/api",headers:{"X-XSRF-TOKEN":M,"Access-Control-Allow-Methods":"PATCH, DELETE, POST, GET, OPTIONS, PUT"}}),z=(a(267),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={userName:"",password:"",showPassword:!1,error:!1},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleButtonClick",value:function(){var e=this,t={userName:this.state.userName,password:this.state.password};R.post("/auth/login",t,{credentials:"include"}).then(function(t){localStorage.setItem("accessToken",t.data.accessToken),e.props.login()}).catch(function(t){console.log(t),e.setState({error:!0})})}},{key:"handleClickShowPassword",value:function(){this.setState({showPassword:!this.state.showPassword})}},{key:"handleInputChange",value:function(e){switch(e.target.name){case"userName":this.setState({userName:e.target.value});break;case"password":this.setState({password:e.target.value})}}},{key:"validator",value:function(){var e=!1,t=!1,a=!1;return this.state.userName.length<4&&(e=!0,a=!0),this.state.password.length<4&&(t=!0,a=!0),{userName:e,password:t,invalidFound:a}}},{key:"render",value:function(){var e=this.props.classes,t=this.validator();return r.a.createElement(v.a,{direction:"row",justify:"center",alignItems:"center",container:!0,className:"Login"},r.a.createElement(v.a,{item:!0,xs:11,md:4},r.a.createElement(k.a,{className:"login-wrapper",elevation:5},r.a.createElement(S.a,{variant:"h4",gutterBottom:!0},"USER LOGIN"),r.a.createElement(I.a,null),r.a.createElement(T.a,{error:t.userName,helperText:"Min. 4 characters",required:!0,className:e.loginItem,label:"Name",value:this.state.userName,onChange:this.handleInputChange.bind(this),name:"userName"}),r.a.createElement(T.a,{error:t.password,helperText:"Min. 4 characters",required:!0,className:e.loginItem,label:"Password",value:this.state.password,onChange:this.handleInputChange.bind(this),name:"password",type:this.state.showPassword?"text":"password",InputProps:{endAdornment:r.a.createElement(y.a,{position:"end"},r.a.createElement(w.a,{onClick:this.handleClickShowPassword.bind(this)},this.state.showPassword?r.a.createElement(A.a,null):r.a.createElement(B.a,null)))}}),r.a.createElement(D.a,{className:e.loginItem,size:"large",disabled:t.invalidFound,onClick:this.handleButtonClick.bind(this),variant:"contained"},"Submit"),this.state.error?r.a.createElement(S.a,{variant:"caption",style:{color:"#FF000"}},"Error in login."):null)))}}]),t}(n.Component)),H=Object(E.withStyles)({loginItem:{marginBottom:"2vh"}})(z),q=(a(386),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={userName:"",password:"",userFirst:"",userLast:"",showPassword:!1},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleButtonClick",value:function(){var e={userName:this.state.userName,password:this.state.password,userFirst:this.state.userFirst,userLast:this.state.userLast};this.props.register(e)}},{key:"handleInputChange",value:function(e){switch(e.target.name){case"userName":this.setState({userName:e.target.value});break;case"password":this.setState({password:e.target.value});break;case"userFirst":this.setState({userFirst:e.target.value});break;case"userLast":this.setState({userLast:e.target.value})}}},{key:"handleClickShowPassword",value:function(){this.setState({showPassword:!this.state.showPassword})}},{key:"validator",value:function(){var e=!1,t=!1,a=!1,n=!1,r=!1;return this.state.userName.length<4&&(e=!0,r=!0),this.state.password.length<4&&(t=!0,r=!0),this.state.userFirst.length<2&&(a=!0,r=!0),this.state.userLast.length<2&&(n=!0,r=!0),{userName:e,password:t,firstName:a,lastName:n,invalidFound:r}}},{key:"render",value:function(){var e=this.props.classes,t=this.validator();return r.a.createElement(v.a,{direction:"row",justify:"center",alignItems:"center",container:!0,className:"Register"},r.a.createElement(v.a,{item:!0,xs:11,md:4},r.a.createElement(k.a,{className:"register-wrapper",elevation:5},r.a.createElement(S.a,{variant:"h4",gutterBottom:!0},"USER REGISTER"),r.a.createElement(I.a,null),r.a.createElement(T.a,{required:!0,error:t.userName,helperText:"Min. 4 characters",className:e.loginItem,label:"Name",value:this.state.userName,onChange:this.handleInputChange.bind(this),name:"userName"}),r.a.createElement(T.a,{required:!0,type:this.state.showPassword?"text":"password",error:t.password,helperText:"Min. 4 characters",className:e.loginItem,label:"Password",value:this.state.password,onChange:this.handleInputChange.bind(this),name:"password",InputProps:{endAdornment:r.a.createElement(y.a,{position:"end"},r.a.createElement(w.a,{onClick:this.handleClickShowPassword.bind(this)},this.state.showPassword?r.a.createElement(A.a,null):r.a.createElement(B.a,null)))}}),r.a.createElement(T.a,{required:!0,error:t.firstName,helperText:"Min. 2 characters",className:e.loginItem,label:"First Name",value:this.state.userFirst,onChange:this.handleInputChange.bind(this),name:"userFirst"}),r.a.createElement(T.a,{required:!0,error:t.lastName,helperText:"Min. 2 characters",className:e.loginItem,label:"Last Name",value:this.state.userLast,onChange:this.handleInputChange.bind(this),name:"userLast"}),r.a.createElement(D.a,{className:e.loginItem,size:"large",disabled:t.invalidFound,onClick:this.handleButtonClick.bind(this),variant:"contained"},"Submit"))))}}]),t}(n.Component)),V=Object(E.withStyles)({loginItem:{marginBottom:"2vh"}})(q),W=a(112),G=function(e){return r.a.createElement(v.a,{container:!0,item:!0,md:3},r.a.createElement(T.a,{onKeyPress:function(t){var a;"Enter"===t.key&&(a=t,e.onSearch(a.target.value),a.target.value="",t.preventDefault())},label:"SEARCH",style:{margin:8},placeholder:"Find posts by title",fullWidth:!0,margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0}}))},_=Object(E.withStyles)({container:{padding:"1vh",marginTop:"2vh",textAlign:"center"}})(function(e){var t=e.classes,a=r.a.createElement(v.a,{item:!0,xs:12,md:3},r.a.createElement(W.a,{to:"/login",style:{textDecoration:"none"}},r.a.createElement(D.a,{style:{color:"#555"}},"Log in")),r.a.createElement("p",{style:{display:"inline-block",userSelect:"none"}},"|"),r.a.createElement(W.a,{to:"/register",style:{textDecoration:"none"}},r.a.createElement(D.a,{style:{color:"#555"}},"Register")));return e.loggedIn&&(a=r.a.createElement(v.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{onClick:e.logout,style:{color:"#555"}},"Logout"),void 0!==e.user.roles[1]&&"ROLE_ADMIN"===e.user.roles[1].definition?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:{display:"inline-block",userSelect:"none"}},"|"),r.a.createElement(W.a,{to:"/new",style:{textDecoration:"none",color:"#444"}},r.a.createElement(D.a,null,"New Post")),r.a.createElement("p",{style:{display:"inline-block",userSelect:"none"}},"|"),r.a.createElement(W.a,{to:"/admin",style:{textDecoration:"none",color:"#444"}},r.a.createElement(D.a,null,"Control Panel"))):null)),r.a.createElement(v.a,{direction:"row",justify:"space-between",alignItems:"center",container:!0,classes:{container:t.container}},r.a.createElement(v.a,{item:!0,xs:12,md:6},r.a.createElement(S.a,{variant:"h3",style:{textTransform:"uppercase",color:"#444"}},"Dickens Blog")),a,r.a.createElement(G,{onSearch:e.onSearch}))}),K=a(448),X=(a(387),function(e){return r.a.createElement(v.a,{className:"NavItem",item:!0},r.a.createElement(K.a,{className:"link-wrapper",to:e.url,exact:!0},e.icon,r.a.createElement(S.a,{variant:"subtitle1",classes:{root:"item"}},e.children)))}),J=a(163),Y=a.n(J),$=a(166),Q=a.n($),Z=a(168),ee=a.n(Z),te=a(167),ae=a.n(te),ne=a(165),re=a.n(ne),se=a(164),oe=a.n(se),le=Object(E.withStyles)({container:{padding:"1vh",marginBottom:"1vh"}})(function(e){var t=e.classes;return r.a.createElement(v.a,{direction:"row",justify:"space-around",alignItems:"center",container:!0,classes:{container:t.container}},r.a.createElement(X,{url:"/",icon:r.a.createElement(Y.a,null)},"Home"),r.a.createElement(X,{url:"/category/tech",icon:r.a.createElement(oe.a,null)},"Tech"),r.a.createElement(X,{url:"/category/studies",icon:r.a.createElement(re.a,null)},"Studies"),r.a.createElement(X,{url:"/category/movies",icon:r.a.createElement(Q.a,null)},"Movies"),r.a.createElement(X,{url:"/category/music",icon:r.a.createElement(ae.a,null)},"Music"),r.a.createElement(X,{url:"/category/health",icon:r.a.createElement(ee.a,null)},"Health"))}),ie=a(175),ce=a(169),ue={overrides:{h1:{component:function(e){return r.a.createElement(S.a,Object.assign({gutterBottom:!0,variant:"h4"},e))}},h2:{component:function(e){return r.a.createElement(S.a,Object.assign({gutterBottom:!0,variant:"h6"},e))}},h3:{component:function(e){return r.a.createElement(S.a,Object.assign({gutterBottom:!0,variant:"subtitle1"},e))}},h4:{component:function(e){return r.a.createElement(S.a,Object.assign({gutterBottom:!0,variant:"caption",paragraph:!0},e))}},p:{component:function(e){return r.a.createElement(S.a,Object.assign({paragraph:!0},e))}},li:{component:Object(E.withStyles)(function(e){return{listItem:{marginTop:e.spacing.unit}}})(function(e){var t=e.classes,a=Object(ie.a)(e,["classes"]);return r.a.createElement("li",{className:t.listItem},r.a.createElement(S.a,Object.assign({component:"span"},a)))})}}};var he=function(e){return r.a.createElement(ce.a,Object.assign({options:ue},e))},me=a(80),de=a.n(me),pe=(a(389),Object(E.withStyles)({post:{padding:"1vh",margin:"1vh 0",minHeight:"30vh",width:"100%"},contentWrapper:{height:"21vh",overflow:"hidden",margin:"2vh",wordWrap:"break-word"}})(function(e){var t=e.classes;return r.a.createElement(k.a,{classes:{root:t.post},elevation:5},r.a.createElement(v.a,{container:!0,direction:"row"},r.a.createElement(v.a,{container:!0,item:!0,xs:12,md:6,direction:"column",justify:"space-between"},r.a.createElement(v.a,{item:!0,style:{width:"100%"}},r.a.createElement(S.a,{variant:"title"},e.data.title.toUpperCase()),r.a.createElement(I.a,{style:{marginTop:"1vh"}}),r.a.createElement("div",{className:"body-wrapper"},r.a.createElement(he,null,e.data.body))),r.a.createElement(I.a,null),r.a.createElement(v.a,{container:!0,direction:"row",justify:"space-between",style:{marginTop:"1vh"}},r.a.createElement(v.a,{item:!0,xs:6,md:6},r.a.createElement(S.a,{variant:"body2"},"Author: ",e.data.author.userFirst," ",e.data.author.userLast),r.a.createElement(S.a,{variant:"body2"},new Date(e.data.postDate).toLocaleString("en-GB"))),r.a.createElement(v.a,{item:!0,container:!0,justify:"flex-end",xs:6,md:6},r.a.createElement(W.a,{to:"/post/"+e.data.postId,style:{textDecoration:"none"}},r.a.createElement(D.a,{size:"small",variant:"contained",color:"primary",onClick:function(){e.postOpen(e.data)}},"Read more!"))))),r.a.createElement(v.a,{container:!0,item:!0,xs:12,md:6,justify:"center",alignItems:"center",style:{height:"35vh"}},r.a.createElement("img",{onError:function(e){e.target.src=de.a},src:e.data.imgUrl,alt:"Title",className:"image"}))))})),ge=a(171),ve=function(e){return r.a.createElement("div",{className:"sweet-loading"},r.a.createElement(ge.RingLoader,{sizeUnit:"em",size:15,color:"#2233FF",loading:e.loading}))},Ee=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,posts:{}},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.searchValue?this.loadSearchedPosts(this.props.searchValue):void 0!==this.props.match.params?this.loadCategoryPosts(this.props.match.params):this.loadPosts()}},{key:"componentWillReceiveProps",value:function(e){this.props.searchValue!==e.searchValue?void 0!==e.searchValue&&this.loadSearchedPosts(e.searchValue):this.props.match.params!==e.match.params&&void 0!==e.match.params&&this.loadCategoryPosts(e.match.params)}},{key:"loadPosts",value:function(){var e=this;this.setState({loading:!0},function(){R.get("/posts/all").then(function(t){e.setState({posts:t.data,loading:!1})})})}},{key:"loadSearchedPosts",value:function(e){var t=this;this.setState({loading:!0},function(){R.get("/posts/search/".concat(e)).then(function(e){t.setState({posts:e.data,searchValue:void 0,loading:!1})})})}},{key:"loadCategoryPosts",value:function(e){var t=this,a=e.category;void 0===a?this.loadPosts():this.setState({loading:!0},function(){R.get("/posts/category/".concat(a)).then(function(e){t.setState({posts:e.data,loading:!1})})})}},{key:"render",value:function(){var e=this;if(this.state.loading)return r.a.createElement(v.a,{item:!0,container:!0,justify:"center",xs:12},r.a.createElement(ve,{loading:this.state.loading}));var t=this.state.posts.map(function(t){return r.a.createElement(pe,{postOpen:e.props.postOpen,key:t.postId,data:t})});return r.a.createElement(v.a,{container:!0},t)}}]),t}(n.Component),fe=Object(p.a)(Ee),ye=(a(410),a(50)),be=a.n(ye),we=a(81),Ce=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={body:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(){var e=this,t=localStorage.getItem("accessToken"),a={credentials:"include",headers:{Authorization:"Bearer ".concat(t)}};R.post("/comments/add/".concat(this.props.postId,"/").concat(this.props.user.userId),this.state,a).then(function(t){e.props.newComment()}).catch(function(e){alert("There was some error with the request."),console.log(e)})}},{key:"handleChange",value:function(e){this.setState({body:e.target.value})}},{key:"render",value:function(){return r.a.createElement(v.a,{item:!0,container:!0,xs:8,justify:"center",style:{marginTop:"1vh"}},r.a.createElement(S.a,{variant:"headline",style:{textDecoration:"underline"}},"Post a comment!"),r.a.createElement(T.a,{label:"Give your opinion!",placeholder:"Comment",multiline:!0,margin:"normal",fullWidth:!0,onChange:this.handleChange.bind(this)}),r.a.createElement(D.a,{variant:"text",color:"primary",onClick:this.handleSubmit.bind(this)},"Submit!"))}}]),t}(n.Component),ke=a(68),Oe=a.n(ke),Se=a(72),je=a.n(Se),Ie=a(70),Ne=a.n(Ie),Te=a(71),xe=a.n(Te),De=a(69),Pe=a.n(De),Ae=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0,title:a.props.title,description:a.props.description},a.handleCancel=function(){a.props.handleClose("cancel")},a.handleDelete=function(){a.props.handleClose("delete")},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Oe.a,{open:this.state.open,onClose:this.handleClose},r.a.createElement(Pe.a,null,this.state.title),r.a.createElement(Ne.a,null,r.a.createElement(xe.a,null,this.state.description)),r.a.createElement(je.a,null,r.a.createElement(D.a,{onClick:this.handleCancel,color:"secondary",name:"cancel"},"Cancel"),r.a.createElement(D.a,{onClick:this.handleDelete,color:"primary",name:"delete"},"Delete"))))}}]),t}(r.a.Component),Le=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={comment:a.props.comment,showDialog:!1},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"onClickOpenHandler",value:function(){this.setState({showDialog:!0})}},{key:"onClickCloseHandler",value:function(e){"delete"===e&&this.props.handleDelete(this.state.comment.commentId),this.setState({showDialog:!1})}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.showDialog?r.a.createElement(Ae,{title:"Remove comment?",description:"The comment will be removed. Are you sure?",handleClose:this.onClickCloseHandler.bind(this)}):null,r.a.createElement(S.a,{variant:"caption",style:{fontSize:"2vh",margin:"1vh 0",textAlign:"start",textTransform:"uppercase"}},this.state.comment.author.userFirst),r.a.createElement(S.a,{variant:"body1"},this.state.comment.body),r.a.createElement(v.a,{direction:"row",justify:"center",container:!0,className:"footer comment"},r.a.createElement(v.a,{item:!0,xs:6,id:"remove-wrapper"},void 0!==this.props.user.roles[1]&&"ROLE_ADMIN"===this.props.user.roles[1].definition?r.a.createElement(w.a,{onClick:this.onClickOpenHandler.bind(this)},r.a.createElement(be.a,{color:"secondary"})):null),r.a.createElement(v.a,{item:!0,xs:6,id:"author-wrapper"},r.a.createElement(S.a,{variant:"caption"},new Date(this.state.comment.postDate).toLocaleString("en-GB")))),r.a.createElement(I.a,null))}}]),t}(n.Component),Be=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={comments:[]},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({comments:this.props.comments})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.comments.map(function(t){return r.a.createElement(Le,{user:e.props.user,handleDelete:e.props.handleDelete,key:t.commentId,comment:t})});return r.a.createElement(k.a,{elevation:5,classes:{root:t.comment}},r.a.createElement(S.a,{variant:"headline",style:{textDecoration:"underline"}},"Comments"),r.a.createElement(I.a,{style:{marginTop:"1vh"}}),a,void 0!==this.props.user.roles[0]&&"ROLE_USER"===this.props.user.roles[0].definition?r.a.createElement(v.a,{container:!0,justify:"center"},r.a.createElement(Ce,{user:this.props.user,postId:this.props.postId,newComment:this.props.newComment})):null)}}]),t}(n.Component),Fe=Object(E.withStyles)({comment:{padding:"1vh",margin:"1vh 0",boxSizing:"border-box",width:"100%"}})(Be),Ue=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={post:{},comments:[],loadingPosts:!0,loadingComments:!0,showDialog:!1},a.converter=new we.Converter({tables:!0,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0}),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;R.get("/posts/"+t).then(function(t){e.setState({post:t.data,loadingPosts:!1})}),R.get("comments/"+t).then(function(t){e.setState({comments:t.data,loadingComments:!1})})}},{key:"loadComments",value:function(){var e=this,t=this.props.match.params.id;this.setState({loadingComments:!0},function(){R.get("comments/"+t).then(function(t){e.setState({comments:t.data,loadingComments:!1})})})}},{key:"deleteComment",value:function(e){var t=localStorage.getItem("accessToken"),a={credentials:"include",headers:{Authorization:"Bearer ".concat(t)}};R.delete("/comments/"+e,a).then(this.loadComments.bind(this))}},{key:"deletePostsComments",value:function(e){var t=this,a=localStorage.getItem("accessToken"),n={credentials:"include",headers:{Authorization:"Bearer ".concat(a)}};R.delete("/comments/all/"+e,n).then(function(a){t.deletePost(e)}).catch(function(e){alert("There was some error with the request."),console.log(e)})}},{key:"deletePost",value:function(e){var t=this,a=localStorage.getItem("accessToken"),n={credentials:"include",headers:{Authorization:"Bearer ".concat(a)}};R.delete("/posts/"+e,n).then(function(e){t.props.history.push("/")}).catch(function(e){alert("There was some error with the request."),console.log(e)})}},{key:"onClickOpenHandler",value:function(){this.setState({showDialog:!0})}},{key:"onClickCloseHandler",value:function(e){if("delete"===e){var t=this.props.match.params.id;this.deletePostsComments(t)}this.setState({showDialog:!1})}},{key:"addDefaultSrc",value:function(e){e.target.src=de.a}},{key:"render",value:function(){var e=this.props.classes;return this.state.loadingPosts||this.state.loadingComments?r.a.createElement(v.a,{item:!0,container:!0,justify:"center",xs:12},r.a.createElement(ve,{loading:!0})):r.a.createElement(v.a,{item:!0,xs:10,lg:7},this.state.showDialog?r.a.createElement(Ae,{title:"Remove whole post?",description:"The whole post will be removed. Are you sure?",handleClose:this.onClickCloseHandler.bind(this)}):null,r.a.createElement(v.a,{container:!0},r.a.createElement(k.a,{elevation:5,classes:{root:e.post}},r.a.createElement("img",{onError:this.addDefaultSrc,src:this.state.post.imgUrl,alt:"Header",style:{width:"100%"}}),r.a.createElement(S.a,{variant:"title",style:{fontSize:"3vh",margin:"1vh 0",textAlign:"center"}},this.state.post.title),r.a.createElement(I.a,null),r.a.createElement("div",{className:"body-wrapper-full"},r.a.createElement(he,null,this.state.post.body)),r.a.createElement(I.a,null),r.a.createElement(v.a,{direction:"row",justify:"center",container:!0,className:"footer"},r.a.createElement(v.a,{item:!0,xs:6,id:"remove-wrapper"},void 0!==this.props.user.roles[1]&&"ROLE_ADMIN"===this.props.user.roles[1].definition?r.a.createElement(w.a,{onClick:this.onClickOpenHandler.bind(this)},r.a.createElement(be.a,{color:"secondary"})):null),r.a.createElement(v.a,{item:!0,xs:6,id:"author-wrapper"},r.a.createElement(S.a,{variant:"caption"},"Author: ",this.state.post.author.userFirst," ",this.state.post.author.userLast," - Written: ",new Date(this.state.post.postDate).toLocaleString("en-GB")))))),r.a.createElement(v.a,{container:!0},r.a.createElement(Fe,{user:this.props.user,handleDelete:this.deleteComment.bind(this),postId:this.state.post.postId,newComment:this.loadComments.bind(this),comments:this.state.comments})))}}]),t}(n.Component),Me=Object(p.a)(Object(E.withStyles)({post:{padding:"1vh",margin:"1vh 0",boxSizing:"border-box",width:"100%"},body:{margin:"1vh 0"}})(Ue)),Re=a(43),ze=a.n(Re),He=a(56),qe=a.n(He),Ve=a(57),We=a.n(Ve),Ge=a(44),_e=a.n(Ge),Ke=a(35),Xe=a.n(Ke),Je=a(173),Ye=a.n(Je),$e=(a(434),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleValueChange=function(e){a.setState({value:e}),a.props.onChange(e)},a.handleTabChange=function(e){a.setState({tab:e})},a.state={value:"",tab:"write"},a.converter=new we.Converter({tables:!0,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0}),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement(Ye.a,{onChange:this.handleValueChange,onTabChange:this.handleTabChange,value:this.state.value,generateMarkdownPreview:function(t){return Promise.resolve(e.converter.makeHtml(t))},selectedTab:this.state.tab}))}}]),t}(n.Component)),Qe=a(174),Ze=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={body:"",title:"",category:"NONE",imgUrl:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleImageChange",value:function(e){this.setState({imgUrl:e.target.value})}},{key:"handleCategoryChange",value:function(e){this.setState({category:e.target.value})}},{key:"handleBodyChange",value:function(e){this.setState({body:e})}},{key:"handleSend",value:function(){var e=this,t=localStorage.getItem("accessToken"),a={credentials:"include",headers:{Authorization:"Bearer ".concat(t)}};R.post("/posts/add/".concat(this.props.user.userId),this.state,a).then(function(t){e.props.history.push("/")}).catch(function(e){alert("There was some error with the request."),console.log(e)})}},{key:"handleCancel",value:function(){this.props.history.push("/")}},{key:"validator",value:function(){var e=!1,t=!1,a=!1;return this.state.title.length<4&&(t=!0,a=!0),this.state.body.length<500&&(e=!0,a=!0),{body:e,title:t,invalidFound:a}}},{key:"render",value:function(){var e=this.props.classes,t=this.validator(),a={color:"#000"};return t.body&&(a={color:"#FF0000"}),r.a.createElement(v.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center"},r.a.createElement(v.a,{item:!0,md:3,sm:7,xs:10,classes:{item:e.title}},r.a.createElement(T.a,{error:t.title,helperText:"Min. 4 characters",required:!0,label:"Post Title",fullWidth:!0,onChange:this.handleTitleChange.bind(this)})),r.a.createElement(v.a,{item:!0,md:3,sm:7,xs:10,classes:{item:e.title}},r.a.createElement(T.a,{label:"Title image url (optional)",fullWidth:!0,onChange:this.handleImageChange.bind(this)})),r.a.createElement(v.a,{item:!0,md:3,sm:7,xs:10,classes:{item:e.title}},r.a.createElement(We.a,{fullWidth:!0},r.a.createElement(qe.a,{htmlFor:"category-label"},"Category (optional)"),r.a.createElement(_e.a,{value:this.state.category,onChange:this.handleCategoryChange.bind(this),fullWidth:!0,input:r.a.createElement(ze.a,{name:"category",id:"category-label"})},r.a.createElement(Xe.a,{value:"NONE"},r.a.createElement("em",null,"None")),r.a.createElement(Xe.a,{value:"MOVIES"},"Movies"),r.a.createElement(Xe.a,{value:"TECH"},"Tech"),r.a.createElement(Xe.a,{value:"MUSIC"},"Music"),r.a.createElement(Xe.a,{value:"STUDIES"},"Studies"),r.a.createElement(Xe.a,{value:"HEALTH"},"Health")))),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(I.a,null)),r.a.createElement(v.a,{item:!0,xs:12,classes:{item:e.editor}},r.a.createElement($e,{onChange:this.handleBodyChange.bind(this)}),r.a.createElement(Qe.a,{style:a},"Minimum 500 characters")),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(I.a,null)),r.a.createElement(v.a,{container:!0,justify:"center"},r.a.createElement(D.a,{onClick:this.handleSend.bind(this),disabled:t.invalidFound,size:"large",variant:"contained",color:"primary",classes:{root:e.button}},"Send"),r.a.createElement(D.a,{onClick:this.handleCancel.bind(this),size:"large",variant:"contained",color:"secondary",classes:{root:e.button}},"Cancel")))}}]),t}(n.Component),et=Object(p.a)(Object(E.withStyles)(function(e){return{editor:{marginTop:"3vh",marginBottom:"3vh"},title:{margin:"0 2vh 3vh 2vh",height:"100%"},button:{margin:"3vh 3vh"}}})(Ze)),tt=a(73),at=a.n(tt),nt=a(75),rt=a.n(nt),st=a(31),ot=a.n(st),lt=a(74),it=a.n(lt),ct=a(58),ut=a.n(ct),ht=(a(438),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showDialog:!1,users:[],userToDelete:void 0,loading:!1},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.updateUsers()}},{key:"updateUsers",value:function(){var e=this,t=localStorage.getItem("accessToken"),a={credentials:"include",headers:{Authorization:"Bearer ".concat(t)}};this.setState({loading:!0},function(){return R.get("users/all",a).then(function(t){return e.setState({users:t.data,loading:!1})}).catch(function(e){alert("There was some error with the request."),console.log(e)})})}},{key:"handleSelectChange",value:function(e,t){var a,n=this,r=localStorage.getItem("accessToken"),s={credentials:"include",headers:{Authorization:"Bearer ".concat(r)}};"Admin"===e.target.value?a=!0:"User"===e.target.value&&(a=!1),R.post("users/role/".concat(t.userId,"/").concat(a),void 0,s).then(function(){n.updateUsers(),n.props.user.userId===t.userId&&n.props.logout()}).catch(function(e){alert("There was some error with the request."),console.log(e)})}},{key:"handleDeleteOnClick",value:function(e,t){this.setState({showDialog:!0,userToDelete:t})}},{key:"handleDelete",value:function(e){var t=this,a=localStorage.getItem("accessToken"),n={credentials:"include",headers:{Authorization:"Bearer ".concat(a)}};"delete"===e&&R.delete("users/".concat(this.state.userToDelete.userId),n).then(function(){t.updateUsers(),t.props.user.userId===t.state.userToDelete.userId&&t.props.logout()}).catch(function(e){alert("There was some error with the request."),console.log(e)}),this.setState({showDialog:!1})}},{key:"createData",value:function(e){return{userId:e.userId,userName:e.userName,wholeName:e.wholeName,role:e.roles.length>1?"Admin":"User"}}},{key:"render",value:function(){var e=this,t=this.state.users.map(function(t){return e.createData(t)});return this.state.loading?r.a.createElement(v.a,{item:!0,container:!0,justify:"center",xs:12},r.a.createElement(ve,{loading:this.state.loading})):r.a.createElement(k.a,{className:"table-wrapper"},this.state.showDialog?r.a.createElement(Ae,{title:"Delete user",description:"Are you sure you want to delete ".concat(this.state.userToDelete.userName,"?"),handleClose:this.handleDelete.bind(this)}):null,r.a.createElement(at.a,null,r.a.createElement(it.a,null,r.a.createElement(ut.a,null,r.a.createElement(ot.a,{align:"right"},"User id"),r.a.createElement(ot.a,{align:"right"},"Username"),r.a.createElement(ot.a,{align:"right"},"Name"),r.a.createElement(ot.a,{align:"right"},"Role"),r.a.createElement(ot.a,{align:"right"},"Delete"))),r.a.createElement(rt.a,null,t.map(function(t){return r.a.createElement(ut.a,{key:t.userId},r.a.createElement(ot.a,{component:"th",scope:"row"},t.userId),r.a.createElement(ot.a,{align:"right"},t.userName),r.a.createElement(ot.a,{align:"right"},t.wholeName),r.a.createElement(ot.a,{align:"right"},r.a.createElement(_e.a,{value:t.role,onChange:function(a){e.handleSelectChange(a,t)}},r.a.createElement(Xe.a,{value:"Admin"},"Admin"),r.a.createElement(Xe.a,{value:"User"},"User"))),r.a.createElement(ot.a,{align:"right"},r.a.createElement(w.a,{onClick:function(a){e.handleDeleteOnClick(a,t)}},r.a.createElement(be.a,null))))}))))}}]),t}(n.Component)),mt=Object(p.a)(ht),dt=(a(445),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={modalOpen:!1,openPost:{},searchValue:void 0},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handlePostOpen",value:function(e){var t=this;this.setState({openPost:e},function(){t.setState({modalOpen:!0})})}},{key:"handleSearch",value:function(e){""===e?this.setState({searchValue:void 0}):this.setState({searchValue:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{direction:"row",justify:"center",container:!0,className:"Home"},r.a.createElement(v.a,{item:!0,xs:10,md:8},r.a.createElement(k.a,{square:!0},r.a.createElement(_,{user:this.props.user,onSearch:this.handleSearch.bind(this),logout:this.props.logout,loggedIn:this.props.loggedIn}),r.a.createElement(I.a,{variant:"middle"}),r.a.createElement(le,null))),r.a.createElement(m.a,null,r.a.createElement(d.a,{path:"/new",render:function(){return r.a.createElement(v.a,{item:!0,xs:10,md:7},r.a.createElement(et,{user:e.props.user}))}}),r.a.createElement(d.a,{path:"/admin",render:function(){return r.a.createElement(v.a,{item:!0,xs:10,md:7},r.a.createElement(mt,{logout:e.props.logout,user:e.props.user}))}}),r.a.createElement(d.a,{path:"/post/:id",render:function(){return r.a.createElement(Me,{user:e.props.user})}}),r.a.createElement(d.a,{path:"/category/:category",render:function(){return r.a.createElement(v.a,{item:!0,xs:10,md:7},r.a.createElement(fe,{searchValue:e.state.searchValue,postOpen:e.handlePostOpen.bind(e)}))}}),r.a.createElement(d.a,{path:"/",render:function(){return r.a.createElement(v.a,{item:!0,xs:10,md:7},r.a.createElement(fe,{searchValue:e.state.searchValue,postOpen:e.handlePostOpen.bind(e)}))}})))}}]),t}(n.Component)),pt=(a(446),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).anonUser={roles:["ANONYMOUS"]},a.state={loggedIn:!1,user:a.anonUser},a.handleLogin=function(){var e=localStorage.getItem("accessToken");R.get("/users/details",{headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){a.setState({loggedIn:!0,user:e.data.user}),a.props.history.push("/")}).catch(function(e){alert("There was some error with the request."),console.log(e)})},a.handleLogout=function(){a.setState({loggedIn:!1,user:a.anonUser},function(){localStorage.removeItem("accessToken")}),a.props.history.push("/")},a.handleRegister=function(e){R.post("/auth/register",e).then(function(e){a.props.history.push("/")}).catch(function(e){alert("There was some error with the request."),console.log(e)})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("accessToken")&&this.initUserDetails()}},{key:"initUserDetails",value:function(){var e=this,t=localStorage.getItem("accessToken");R.get("/users/details",{headers:{Authorization:"Bearer ".concat(t)}}).then(function(t){e.setState({loggedIn:!0,user:t.data.user})}).catch(function(e){alert("There was some error with the request."),console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{direction:"row",justify:"center",container:!0,className:"App"},r.a.createElement(v.a,{container:!0,justify:"center"},r.a.createElement(m.a,null,r.a.createElement(d.a,{path:"/login",render:function(){return r.a.createElement(H,{login:e.handleLogin.bind(e)})}}),r.a.createElement(d.a,{path:"/register",render:function(){return r.a.createElement(V,{register:e.handleRegister.bind(e)})}}),r.a.createElement(d.a,{path:"/",render:function(){return r.a.createElement(dt,{user:e.state.user,loggedIn:e.state.loggedIn,logout:e.handleLogout.bind(e)})}}))))}}]),t}(n.Component)),gt=Object(p.a)(pt),vt=a(449);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Et=r.a.createElement(vt.a,null,r.a.createElement(gt,null));o.a.render(Et,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},80:function(e,t,a){e.exports=a.p+"static/media/header_placeholder.9adfc3a6.jpg"}},[[242,1,2]]]);
//# sourceMappingURL=main.4031f1ed.chunk.js.map